# Исправление: Вопросы с изображениями без кнопок

## Проблема

Когда вопрос имеет тип `image` и содержит варианты ответов (4 варианта), бот отправляет только изображение с текстом "Напишите ваш ответ текстом", без кнопок для выбора вариантов.

## Причина

Метод `sendImageQuestion` в `QuizService` всегда отправлял вопросы с изображениями как текстовые, без проверки наличия вариантов ответов.

## Исправления

### 1. Обновлен `QuizService::sendImageQuestion`

- Добавлена проверка наличия вариантов ответов через `$question->getShuffledAnswers()`
- Если есть 2+ варианта ответов, создаются кнопки и отправляется изображение с кнопками
- Если вариантов нет, отправляется изображение с текстом "Напишите ваш ответ текстом"

### 2. Добавлен метод `TelegramService::sendPhotoWithButtons`

- Новый метод для отправки изображения с inline кнопками
- Поддерживает как URL/file_id, так и локальные файлы
- Правильно передает `reply_markup` в Telegram API

### 3. Обновлен `QuizService::prepareAnswersForQuestion`

- Для вопросов типа `TYPE_IMAGE` теперь проверяется наличие вариантов ответов
- Если есть варианты, они сохраняются в `answers_order` для правильной обработки ответов

## Результат

Теперь вопросы с изображениями:
- ✅ Если есть варианты ответов (2+) → отправляются с кнопками
- ✅ Если нет вариантов → отправляются как текстовые вопросы

## Файлы изменены

1. `app/Services/QuizService.php`:
   - Метод `sendImageQuestion()` - добавлена логика проверки вариантов ответов
   - Метод `prepareAnswersForQuestion()` - обновлена логика для `TYPE_IMAGE`

2. `app/Services/TelegramService.php`:
   - Добавлен метод `sendPhotoWithButtons()` - отправка изображения с кнопками
   - Обновлен метод `sendPhoto()` - поддержка `reply_markup` в options
   - Обновлен метод `sendPhotoFile()` - поддержка `reply_markup` в multipart

## Проверка

После исправлений:
1. Создайте вопрос типа "С изображением"
2. Добавьте 4 варианта ответов
3. Загрузите изображение
4. Запустите викторину
5. Проверьте, что изображение отправляется с кнопками для выбора вариантов
